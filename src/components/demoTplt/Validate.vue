<template>
  <div>
    <!--
      1. 沒有ruleList就不會觸發驗證
      2. func和funcResult是成對的，會在blur觸發，沒有func就不觸發
     -->
    <TpltInputWrapper label="標籤1"
                      :ruleListWithMsg="['hasText-tplt']"
                      :extraInfo="{a: '1',b:2}"
                      :func="() => 'hi'"
                      @funcResult="funcResult">
      <TpltInput v-model="testValue"
                 ref="tpltl1"></TpltInput>
    </TpltInputWrapper>

    <TpltInputWrapper label="標籤2"
                      :ruleListWithMsg="['hasText','overStringLength:3']"
                      :extraInfo="{a: '1',b:2}"
                      :func="() => 'hi'"
                      @funcResult="funcResult">
      <TpltInput v-model="testValue"
                 ref="tpltl2"></TpltInput>
    </TpltInputWrapper>

    <button @click="submit">button</button>
  </div>
</template>

<script>
import TpltInput from '@/components/demoTplt/TpltInput.vue';
import TpltInputWrapper from '@/components/demoTplt/TpltInputWrapper.vue';

export default {
  name: 'Validate',
  components: {
    TpltInput,
    TpltInputWrapper,
  },
  data() {
    return {
      infos: { haha: 'haha', byebye: 'byebye' },
      testValue: '',
    };
  },
  methods: {
    funcResult(res) {
      console.log('res', res);
    },
    submit() {
      const isPass = this.validateForm(this.$refs);
      console.log('是否全部通過', isPass);
    }
  }
};
</script>

<style lang="scss" scoped>
@import '~@/styles/index';
</style>
